<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="./css/output.css" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
        <script type="text/javascript" src="js/code.js"></script>
        <script type="module" src="components/app-header.js"></script>
        <script type="text/javascript" src="components/contact-card.js"></script>
        <title> Home </title>

        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() 
            {
                checkLogin();
                document.getElementById("searchText").value = "";
                getContacts();
            }, false);
        </script>
    </head>

    <body>
        <app-header></app-header>
        <main class = "min-h-screen flex flex-col items-center">
            <!-- Filled in by checkLogin() -->
            <h1 class = "mt-5 text-3xl font-bold" id="firstName"></h1>
            <div class="flex flex-row items-end justify-center gap-3">
                <input id = "searchText" class = "mt-5 px-5 py-3 rounded-2xl" type = "text" placeholder="Search Contact"/>
                <button type="button" class="inline-flex justify-center items-center w-14 h-12 rounded-2xl hover:bg-white hover:text-yellow-400 transition-colors" onclick="searchContact();">
                    <!-- Icon -->
                    <span class="material-symbols-outlined">search</span>
                </button>
            </div>
            <span id="contactSearchResult" class="py-3 font-semibold"></span>
            <br /><br />

            <!-- Add Contact Button -->
            <button
            class="flex flex-row items-center justify-center rounded-md px-4 py-2 bg-yellow-400 text-md text-white font-bold hover:bg-white hover:text-yellow-400 transition"
            onclick="document.getElementById('addContactForm').classList.toggle('hidden')"
            >
            <span class="material-symbols-outlined pr-2">add</span>
            Add contact
            </button>

            <!-- Add Contact Form -->
            <div id="addContactForm" class="hidden mt-6 w-full max-w-md">
            <input
                id="addFirstName"
                class="w-full mb-3 px-4 py-2 rounded-md"
                type="text"
                placeholder="First Name"
            />

            <input
                id="addLastName"
                class="w-full mb-3 px-4 py-2 rounded-md"
                type="text"
                placeholder="Last Name"
            />

            <input
                id="addPhone"
                class="w-full mb-3 px-4 py-2 rounded-md"
                type="text"
                placeholder="Phone"
            />

            <input
                id="addEmail"
                class="w-full mb-3 px-4 py-2 rounded-md"
                type="text"
                placeholder="Email"
            />
            <!-- Delete Contact button -->
             <button
                class="w-full rounded-md px-4 py-2 bg-red-500 text-white font-bold hover:bg-white hover:text-red-500 transition"
                onclick="enableDelete();"
            >
            Delete Contact
            </button>
            <button
                class="w-full rounded-md px-4 py-2 bg-yellow-400 text-white font-bold hover:bg-white hover:text-yellow-400 transition"
                onclick="addContact();"
            >
                Save Contact
            </button>

            <span id="addContactResult" class="block mt-2"></span>
            </div>

            
            <!-- Contact List -->
             <div class="max-w-full mt-8" >
                <h1 class="text-4xl font-bold text-center" id="getContactsResult">
                    Your Contacts
                </h1>
                <div id="contactList" class="p-5 grid grid-cols-1 sm:grid-cols-2 gap-5 mt-3"></div>
             </div>
        </main>

        <!-- Successful deletion dialog -->
         <dialog id="deleteSuccessDialog" class="m-auto rounded-md p-0 border-none bg-transparent backdrop:bg-black/80">
            <div class="flex flex-col p-10 justify-center items-center bg-[#2b2b2b] rounded-lg text-center">
                <span class="material-symbols-outlined text-green-600 pb-5">check_circle</span>
                <h1 class="text-lg font-semibold text-white">Contact deleted successfully.</h1>
            </div>
        </dialog>
    </body>
</html>